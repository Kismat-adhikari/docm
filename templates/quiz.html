<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz - StudyPasa</title>
    <link rel="stylesheet" href="/static/css/quiz.css">
</head>
<body>
    <div class="studypasa-main-container">
        <!-- Quiz Section -->
        <div class="studypasa-quiz-section">
            <div class="studypasa-quiz-header">
                <h1>Generated MCQs</h1>
                <p class="studypasa-file-info">From file: <strong>{{ filename }}</strong></p>
            </div>
            
            <div class="studypasa-quiz-metrics">
                <span class="studypasa-total-count">Total Questions: {{ mcqs|length }}</span>

                <span class="studypasa-score-display">Score: <span id="studypasa-score-counter">0</span>/{{ mcqs|length }}</span>
            </div>
            
            <div class="studypasa-quiz-wrapper">
                {% for mcq in mcqs %}
                <div class="studypasa-question-item" data-question-index="{{ loop.index0 }}">
                    <div class="studypasa-question-number">
                        Question {{ loop.index }}
                    </div>
                    
                    <div class="studypasa-question-content">
                        {{ mcq.question }}
                    </div>
                    
                    <div class="studypasa-answer-options">
                        {% for option in mcq.options %}
                        <button class="studypasa-option-button" 
                                data-option-index="{{ loop.index0 }}"
                                data-correct-answer="{{ mcq.correct_answer }}">
                            <span class="studypasa-option-label">{{ ['A', 'B', 'C', 'D'][loop.index0] }}</span>
                            <span class="studypasa-option-text">{{ option }}</span>
                        </button>
                        {% endfor %}
                    </div>
                    
                    <div class="studypasa-answer-feedback">
                        <div class="studypasa-feedback-content">
                            <span class="studypasa-feedback-icon"></span>
                            <span class="studypasa-feedback-text"></span>
                        </div>
                    </div>
                </div>
                {% endfor %}
            </div>
            
            <div class="studypasa-quiz-controls">
                <button class="studypasa-btn studypasa-btn-secondary" onclick="resetStudyPasaQuiz()">Reset Quiz</button>
                <a href="{{ url_for('index') }}" class="studypasa-btn studypasa-btn-primary">Generate New Quiz</a>
            </div>
        </div>

                    <div class="studypasa-quiz-metrics">
                <span class="studypasa-total-count">Total Flashcards: {{ flashcards|length }}</span>
                <span class="studypasa-score-display">Seen: <span id="studypasa-seen-counter">0</span>/{{ flashcards|length }}</span>
            </div>
            <!-- Flashcard Section -->
        <div class="studypasa-flashcard-section">
            <h2>Flashcards</h2>
            <div class="studypasa-flashcard-grid">
                {% for flashcard in flashcards %}
                <div class="studypasa-flashcard-item" onclick="toggleFlashcard(this, '{{ loop.index0 }}')">
                    <div class="studypasa-flashcard-front">
                        <h3>{{ flashcard.front }}</h3>
                    </div>
                    <div class="studypasa-flashcard-back">
                        <p>{{ flashcard.back }}</p>
                    </div>
                </div>
                {% endfor %}
            </div>
        </div>
    </div>

    <!-- Assistant Chatbot -->
    <div class="studypasa-assistant-container">
        <button class="studypasa-assistant-trigger" id="studypasa-assistant-trigger">
            <img src="https://via.placeholder.com/45x45/667eea/ffffff?text=QP" alt="QuizPasa Assistant" />
        </button>
        
        <div class="studypasa-assistant-panel" id="studypasa-assistant-panel">
            <div class="studypasa-assistant-header">
                <h3 class="studypasa-assistant-title">QuizPasa Assistant</h3>
                <button class="studypasa-assistant-close" id="studypasa-assistant-close">×</button>
            </div>
            
            <div class="studypasa-conversation-area" id="studypasa-conversation-area">
                <!-- Messages will be populated by JavaScript -->
            </div>
            
            <div class="studypasa-input-area">
                <input 
                    type="text" 
                    class="studypasa-message-input" 
                    id="studypasa-message-input"
                    placeholder="Ask me anything about studying..."
                />
                <button class="studypasa-send-button" id="studypasa-send-button" title="Send message">
                    ➤
                </button>
            </div>
        </div>
    </div>

<script src="/static/js/script.js"></script>